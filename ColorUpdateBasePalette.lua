GeneralColourValues =
{--Personal List R,G,B True values
    {255,255,255},  --1
    {255,255,255},  --2
    {255,255,255},  --3
    {255,255,255},  --4
    {255,255,255},  --5
    {255,255,255},  --6
    {255,255,255},  --7
    {0,0,0},        --8
    {76,76,76},	    --9
    {255,255,255},  --10
    {0,0,0},        --11
    {0,0,0},        --12
    {255,255,255},  --13
    {0,0,0},        --14
    {255,255,255},  --15
    {0,0,0},        --16
    {255,255,255},  --17
    {255,255,255},  --18
    {0,0,0},        --19
    {255,255,255},  --20
    {0,0,0},        --21
    {255,255,255},  --22
    {0,0,0},        --23
    {255,255,255},  --24
    {185,110,110},  --25
    {185,90,90},    --26
    {185,70,70},    --27
    {185,50,50},    --28
    {185,30,30},    --29
    {165,0,0},	    --30
    {140,0,0},	    --31
    {73,21,108},    --32
    {48,15,79},	    --33
    {200,120,184},  --34
    {135,83,180},   --35
    {145,71,132},   --36
    {95,15,230},    --37
    {5,23,102},		--38
    {0,31 ,137},    --39
    {8,58,128},	    --40
    {44,130,210},   --41
    {28,105,28},    --42
    {55,105,230},   --43
    {38,145,198},   --44
    {38,145,198},   --45
    {255,0,255},    --46
    {0,136,202},    --47
    {27,94,182},    --48
    {16,48,148},    --49
    {22,70,159},    --50
    {22,64,172},    --51
    {20,80,109},    --52
    {0,0,0},	    --53
    {46,139,87},    --54
    {0,153,24},	    --55
    {0,0,0},	    --56
    {23,112,60},    --57
    {22,103,96},    --58
    {255,255,255},   --59
    {255,255,255},   --60
    {78,148,42},	--61
    {33,161,81},	--62
    {0,0,0},	    --63
    {30,141,70},	--64    
}   
    
 --Currently these are still Default From "True Color"   
 -- FreighterColours =   
-- { 
    -- {254.635095,254.635095,254.635095},	--1
    -- {254.635095,254.635095,254.635095},	--2
    -- {254.49,	254.49,254.49},	--3
    -- {254.235,	254.235,254.235},	--4
    -- {253.98,	253.98,253.98},	--5
    -- {38.76,	38.76,38.76},	--6
    -- {38.505,	38.505,38.505},	--7
    -- {254.635095,254.635095,254.635095},	--8
    -- {254.635095,254.635095,254.635095},--9
    -- {254.49,	254.49,254.49},	--10
    -- {254.235,254.235,254.235},--11
    -- {-253.98,	-253.98,-253.98},	--12
    -- {178.5,	178.5,178.5},	--13
    -- {178.245,	178.245,178.245},	--14
    -- {127.5,	127.5,127.5},	--15
    -- {127.245,	127.245,127.245},	--16
    -- {76.5,	76.5,76.5},	--17
    -- {76.245,	76.245,76.245},	--18
    -- {38.25,	38.25,38.25},	--19
    -- {37.995,	37.995,37.995},	--20
    -- {0,	  0,0},	    --21
    -- {0.255,	0.255,0.255},	--22
    -- {-25.5,	-25.5,-25.5},	--23
    -- {-25.245,	-25.245,-25.245},	--24
    -- {26.01,	17.085,8.925},	--25
    -- {35.955,	26.01,16.065},	--26
    -- {44.115,	32.895,22.95},	--27
    -- {19.89,	11.985,9.945},	--28
    -- {29.07,	17.085,13.005},	--29
    -- {36.975,	23.97,19.125},	--30
    -- {72.93,	8.925,19.125},	--31
    -- {103.02,	14.025,27.03},	--32
    -- {126.99,	20.91,32.895},	--33
    -- {77.01,	0,7.905},	--34
    -- {98.94,	0,10.965},	--35
    -- {126.99,	10.965,17.085},	--36
    -- {172.89,	66.045,27.03},	--37
    -- {193.035,	94.095,23.97},	--38
    -- {210.885,	124.95,31.11},	--39
    -- {227.97,	194.055,8.925},	--40
    -- {254.635095,243.015,24.99},	--41
    -- {254.635095,249.9,59.925},	--42
    -- {123.93,	198.9,48.96},	--43
    -- {78.03,	148.92,42.075},	--44
    -- {16.065,	75.99,41.055},	--45
    -- {19.125,	91.035,48.96},	--46
    -- {22.95,	109.905,57.885},	--47
    -- {27.03,	130.05,67.065},	--48
    -- {22.95,	103.02,96.9},	--49
    -- {31.11,	137.955,129.03},	--50
    -- {77.01,	185.895,176.97},	--51
    -- {27.03,	104.04,143.055},	--52
    -- {37.995,	145.095,197.88},	--53
    -- {94.095,	184.11,228.99},	--54
    -- {22.95,	70.125,159.885},	--55
    -- {27.03,	94.095,182.07},	--56
    -- {44.115,	121.89,210.885},	--57
    -- {5.1,	  22.95,102},	    --58
    -- {14.025,	33.915,121.89},	--59
    -- {16.065,	48.96,148.92},	--60
    -- {73.95,	21.93,108.12},	--61
    -- {134.895,	82.875,179.01},	--62
    -- {200.94,	119.085,183.09},	--63
    -- {254.635095,254.635095,254.635095},--64
-- }

-- --Currently these are still Default From "True Color"   
FreighterPaintColours =      
{     
    {230,230,230},  --1
	{255,223,181},  --2
	{251,242,207},  --3
	{239,244,251},  --4
	{212,226,240},  --5
	{212,226,240},  --6
	{242,242,242},  --7
	{91,91,98},	    --8
	{251,133,61},   --9
	{200,89,61},    --10
	{235,105,14},   --11
	{249,117,68},   --12
	{253,124,73},   --13
	{255,186,102},  --14
	{255,160,1},    --15
	{230,196,145},  --16
	{244,184,40},   --17
	{249,235,17},   --18
	{251,200,94},   --19
	{255,172,63},   --20
	{246,207,107},  --21
	{255,242,133},  --22
	{255,242,24},   --23
	{244,184,40},   --24
	{251,107,86},   --25
	{235,94,79},   --26
	{198,75,66},    --27
	{209,72,73},    --28
	{160,79,86},    --29
	{255,147,117},  --30
	{240,96,82},    --31
	{219,86,79},    --32
	{160,58,70},    --33
	{232,112,121},  --34
	{204,103,107},  --35
	{235,96,100},   --36
	{226,126,128},  --37
	{205,87,86},    --38
	{165,79,70},    --39
	{191,114,107},  --40
	{65,110,179},   --41
	{47,121,161},   --42
	{110,140,237},  --43
	{121,158,218},  --44
	{144,195,198},  --45
	{144,195,198},  --46
	{61,142,202},   --47
	{65,110,179},   --48
	{68,96,135},    --49
	{61,135,218},   --50
	{98,156,202},   --51
	{66,114,137},   --52
	{100,172,195},	--53
	{117,124,168},  --54
	{91,119,167},   --55
	{77,84,103},    --56
	{112,170,116},  --57
	{51,130,108},   --58
	{100,121,116},  --59
	{82,112,86},    --60
	{100,177,135},  --61
	{151,200,156},  --62
	{73,114,116},   --63
	{117,149,128},  --64
}
--[[UnderCoatColourValues =
{--Personal List
    {255,255,255},--1
    {255,255,255},--2
    {255,255,255},--3
    {255,255,255},--4
    {255,255,255},--5
    {255,255,255},--6
    {255,255,255},--7
    {255,255,255},--8
    {255,255,255},--9
    {255,255,255},--10
    {255,255,255},--11
    {255,255,255},--12
    {255,255,255},--13
    {255,255,255},--14
    {255,255,255},--15
    {255,255,255},--16
    {255,255,255},--17
    {255,255,255},--18
    {255,255,255},--19
    {255,255,255},--20
    {255,255,255},--21
    {255,255,255},--22
    {255,255,255},--23
    {255,255,255},--24
    {255,255,255},--25
    {255,255,255},--26
    {255,255,255},--27
    {255,255,255},--28
    {255,255,255},--29
    {255,255,255},--30
    {255,255,255},--31
    {255,255,255},--32
    {255,255,255},--33
    {255,255,255},--34
    {255,255,255},--35
    {255,255,255},--36
    {255,255,255},--37
    {255,255,255},--38
    {255,255,255},--39
    {255,255,255},--40
    {255,255,255},--41
    {255,255,255},--42
    {255,255,255},--43
    {255,255,255},--44
    {255,255,255},--45
    {255,255,255},--46
    {255,255,255},--47
    {255,255,255},--48
    {255,255,255},--49
    {255,255,255},--50
    {255,255,255},--51
    {255,255,255},--52
    {255,255,255},--53
    {255,255,255},--54
    {255,255,255},--55
    {255,255,255},--56
    {255,255,255},--57
    {255,255,255},--58
    {255,255,255},--59
    {255,255,255},--60
    {255,255,255},--61
    {255,255,255},--62
    {255,255,255},--63
    {255,255,255},--64
}]]

UnderCoatColourValues =
 {--Personal List
    {0,0,0},--1
    {0,0,0},--2
    {0,0,0},--3
    {0,0,0},--4
    {0,0,0},--5
    {0,0,0},--6
    {0,0,0},--7
    {0,0,0},--8
    {0,0,0},--9
    {0,0,0},--10
    {0,0,0},--11
    {0,0,0},--12
    {0,0,0},--13
    {0,0,0},--14
    {0,0,0},--15
    {0,0,0},--16
    {0,0,0},--17
    {0,0,0},--18
    {0,0,0},--19
    {0,0,0},--20
    {0,0,0},--21
    {0,0,0},--22
    {0,0,0},--23
    {0,0,0},--24
    {0,0,0},--25
    {0,0,0},--26
    {0,0,0},--27
    {0,0,0},--28
    {0,0,0},--29
    {0,0,0},--30
    {0,0,0},--31
    {0,0,0},--32
    {0,0,0},--33
    {0,0,0},--34
    {0,0,0},--35
    {0,0,0},--36
    {0,0,0},--37
    {0,0,0},--38
    {0,0,0},--39
    {0,0,0},--40
    {0,0,0},--41
    {0,0,0},--42
    {0,0,0},--43
    {0,0,0},--44
    {0,0,0},--45
    {0,0,0},--46
    {0,0,0},--47
    {0,0,0},--48
    {0,0,0},--49
    {0,0,0},--50
    {0,0,0},--51
    {0,0,0},--52
    {255,255,255},--53
    {0,0,0},--54
    {0,0,0},--55
    {0,0,0},--56
    {0,0,0},--57
    {0,0,0},--58
    {0,0,0},--59
    {0,0,0},--60
    {0,0,0},--61
    {0,0,0},--62
    {0,0,0},--63
    {0,0,0},--64
}

MetalColourValues =
{--Personal List R,G,B True values
    {255,255,255},   --1
    {255,255,255},   --2
    {255,255,255},   --3
    {255,255,255},   --4
    {255,255,255},   --5
    {255,255,255},   --6
    {255,255,255},   --7
    {0,-0,0},        --8
    {76.5,76.5,76.5},--9
    {255,255,255},   --10
    {0,0,0},	     --11
    {0,0,0},         --12
    {255,255,255},   --13
    {0,0,0},	     --14
    {255,255,255},   --15
    {0,0,0},         --16
    {255,255,255},   --17
    {255,255,255},	 --18
    {0,0,0},	     --19
    {255,255,255},	 --20
    {0,0,0},	     --21
    {255,255,255},	 --22
    {0,0,0},	     --23
    {255,255,255},	 --24
    {185,0,0},	     --25
    {185,0,0},	     --26
    {185,0,0},	     --27
    {185,0,0},	     --28
    {185,0,0},	     --29
    {185,0,0},	     --30
    {185,0,0},	     --31
    {95,15,230},	 --32
    {255,255,255},	 --33
    {95,15,230},	 --34
    {95,15,230},	 --35
    {95,15,230},	 --36
    {95,15,230},	 --37 
    {73,21,108},	 --38
    {73,21,108},	 --39
    {73,21,108},	 --40 
    {73,21,108},	 --41 
    {28,105,245},	 --42
    {28,105,245},	 --43
    {28,105,245},	 --44
    {28,105,245},	 --45
    {255,0,255},	 --46
    {25,65,170},	 --47
    {25,65,170},	 --48
    {25,65,170},	 --49
    {25,65,170},	 --50
    {25,65,170},	 --51
    {25,65,170},	 --52
    {0,0,0},	     --53
    {46,139,87},	 --54
    {46,139,87},	 --55
    {0,0,0},	     --56
    {25,112,60},	 --57
    {25,112,60},	 --58
    {255,255,255},	 --59
    {255,255,255},	 --60
    {35,162,80},	 --61
    {35,162,80},	 --62
    {0,0,0},	     --63
    {35,162,80},	 --64    
}   


Full_Palette_List =
{--just comment out any you do not want to change the color for
    --Section Name          # of colours-- palette List         
    {id='Paint',                c='All', p=MetalColourValues},
   -- {id='BioShip_Body',         c='_16', p=GeneralColourValues},
   -- {id='BioShip_Underbelly',   c='_16', p=GeneralColourValues},
   -- {id='BioShip_Cockpit',      c='_8' , p=GeneralColourValues},
    {id='Metal',                c='All', p=MetalColourValues},
    {id='Plastic',              c='All', p=MetalColourValues},
    
    {id='Freighter',            c='All', p=GeneralColourValues},
    {id='FreighterPaint',       c='All', p=FreighterPaintColours},
--Undercoat?   
    {id='Undercoat',    c='All',    p=UnderCoatColourValues},
}

Legacy_Palette_List = {
    {id='Paint',    c='All', p=MetalColourValues},
    {id='Metal',    c='All', p=MetalColourValues},
    {id='Plastic',  c='All', p=MetalColourValues},
}

function ConvertToNMS(RGB) --also truncates at 6 decimal places
    RGB = RGB / 255 --Remove if using NMS colour numbers
  local mult = 10^(6)
  return math.modf(RGB*mult)/mult
end

function GetNewColourSection(ColorSet)
    return [[
        <Property value="Colour.xml">
                <Property name="R" value="]]..ConvertToNMS(ColorSet[1])..[[" />
                <Property name="G" value="]]..ConvertToNMS(ColorSet[2])..[[" />
                <Property name="B" value="]]..ConvertToNMS(ColorSet[3])..[[" />
                <Property name="A" value="1" />
            </Property>
    ]]
end

function Get_New_Colour_Section(ColourListToUse) 
local tmpColours = ''
 tmpColours = [[
       <Property name="Colours">
    ]]
    for i = 1, #ColourListToUse, 1 do
       tmpColours = tmpColours..GetNewColourSection(ColourListToUse[i])
    end
    tmpColours = tmpColours..[[
    </Property>]]
return tmpColours
end

local function AddNewColoursToChangeTable(Palette_List)
	local T = {}
	for v = 1, #Palette_List, 1 do
        table.insert(T, {
            PRECEDING_KEY_WORDS = {Palette_List[v].id, "Colours"},
            REMOVE				= 'SECTION'
        })        
        table.insert(T, {
        SPECIAL_KEY_WORDS   = {Palette_List[v].id, "GcPaletteData.xml", "NumColours", Palette_List[v].c},
		ADD				    = Get_New_Colour_Section(Palette_List[v].p)
        })	
       
     end   
	return T
end


NMS_MOD_DEFINITION_CONTAINER = 
{
["MOD_FILENAME"] 			= "ColorChangeBase_New_Metal_02.pak",
["MOD_AUTHOR"]				= "",
["MOD_DESCRIPTION"]			= "",
["MODIFICATIONS"] 			= 
	{
		{
			["MBIN_CHANGE_TABLE"] 	= 
			{ 
				{
					["MBIN_FILE_SOURCE"] 	="METADATA\\SIMULATION\\SOLARSYSTEM\\COLOURS\\BASECOLOURPALETTES.MBIN",
                    ["EXML_CHANGE_TABLE"] 	= AddNewColoursToChangeTable(Full_Palette_List)
                },
				{
					["MBIN_FILE_SOURCE"] 	= "METADATA\\SIMULATION\\SOLARSYSTEM\\COLOURS\\LEGACYBASECOLOURPALETTES.MBIN",
                    ["EXML_CHANGE_TABLE"] 	= AddNewColoursToChangeTable(Legacy_Palette_List)
                },
            },
        },
    }
}